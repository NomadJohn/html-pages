webpackJsonp([1],{"/eQD":function(t,e){},"0t1p":function(t,e){},"5kWq":function(t,e){},"7gX2":function(t,e){},ANuU:function(t,e){},CMvz:function(t,e){},"Cj3+":function(t,e){},GZvD:function(t,e){},GrYt:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("4yKu");var a=n("wolx"),s=(n("mMXg"),n("qYlo")),o=(n("nI2B"),n("qWG/")),i=(n("XmAh"),n("il3B")),r=(n("Xrj1"),n("1nur")),c=(n("MVd3"),n("XXPT")),l=(n("yffH"),n("sdMh")),u=(n("OLZS"),n("4j1Q")),d=(n("10Qn"),n("UQoe")),p=(n("3Lne"),n("SSsa")),v=(n("eqfM"),n("/QYm")),h=(n("RgoE"),n("0KWt")),f=(n("1E9F"),n("2Ux5")),m=(n("MY4N"),n("0zAV")),g=(n("i0mo"),n("Hkar")),_=(n("OWWB"),n("1fWZ")),b=(n("3ab0"),n("bHMa")),y=(n("FO5P"),n("woHG")),k=(n("k3b4"),n("+2ln")),w=n("mtWM"),x=n.n(w),q=(n("CMvz"),n("7+uW")),S=n("Rf8U"),I=n.n(S),C={name:"App",data:function(){return{tabActive:0,username:localStorage.getItem("username"),token:localStorage.getItem("token"),navTitle:["计算机&应知刷题","题目搜索","个人中心"],totalRecords:0}},created:function(){this.username&&this.getTotalRecords()},beforeUpdate:function(){},methods:{getTotalRecords:function(){if(console.log("http://132.232.7.38"),this.username){this.username;var t=this;this.axios.get("http://132.232.7.38/getfav.php",{params:{records:!0,username:this.username,token:this.token}}).then(function(e){t.totalRecords=e.data})}},updataTitle:function(t){this.tabActive=t,console.log(t)},onClickLeft:function(){location.href="#/",this.tabActive=0},gotoUser:function(){location.href="#/user",this.tabActive=2}}},A={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("van-nav-bar",{attrs:{title:t.navTitle[t.tabActive]},on:{"click-left":t.onClickLeft,"click-right":t.gotoUser}},[n("van-icon",{attrs:{slot:"left",name:"wap-home"},slot:"left"}),t._v(" "),n("van-icon",{attrs:{slot:"right",name:"contact"},slot:"right"})],1),t._v(" "),n("transition",[n("keep-alive",[n("router-view",{staticStyle:{"margin-bottom":"25%"},attrs:{totalRecords:t.totalRecords},on:{updataTitle:t.updataTitle}})],1)],1),t._v(" "),n("van-tabbar",{model:{value:t.tabActive,callback:function(e){t.tabActive=e},expression:"tabActive"}},[n("van-tabbar-item",{attrs:{icon:"aim",to:"/"}},[t._v("做题")]),t._v(" "),n("van-tabbar-item",{attrs:{icon:"search",to:"/search"}},[t._v("题目搜索")]),t._v(" "),n("van-tabbar-item",{attrs:{icon:"contact",info:t.totalRecords,to:"/user"},on:{click:t.getTotalRecords}},[t._v("我的")])],1)],1)},staticRenderFns:[]};var $,T,P,L=n("VU/8")(C,A,!1,function(t){n("S3AG")},null,null).exports,R=n("/ocq");localStorage.getItem("username")&&(T=localStorage.getItem("username")),localStorage.getItem("token")&&(P=localStorage.getItem("token"));var Q={name:"quizbody",data:function(){return{questions:[{title:"数据加载中……",A:"数据加载中……",B:"数据加载中……",C:"数据加载中……",D:"数据加载中……"}],btnTypes:{A:"default",B:"default",C:"default",D:"default"},questionIndex:0}},created:function(){this.getQuestions()},computed:{percentage:function(){return(this.questionIndex+1)/10*100}},methods:{toaster:function(t,e){this.$toast({duration:e||400,message:t})},getQuestions:function(){$=this.$toast.loading({mask:!0,message:"加载中..."});var t=this;this.axios.get("http://132.232.7.38/getpro.php").then(function(e){t.questions=e.data,$.clear(),t.$toast.success({message:"载入成功",duration:400})})},showAnswer:function(){var t=this.questions[this.questionIndex].answer;this.btnTypes[t]="primary"},addfav:function(t){if(T&&P){var e=this;this.axios.get("http://132.232.7.38/addfav.php",{params:{id:t,username:T,token:P}}).then(function(t){"1"==t.data?e.$toast.success({message:"已收藏",duration:400}):e.$toast.fail({message:"已经收藏过啦",duration:400})})}else this.$toast('未登录哦，点击下方"我的"登录或注册后使用收藏功能~')},checkAnswer:function(t){this.clearOptions(),t==this.questions[this.questionIndex].answer?(this.toaster("回答正确"),this.btnTypes[t]="primary"):(this.toaster("回答错误"),this.btnTypes[t]="warning")},nextQuestion:function(){this.questionIndex<9?this.questionIndex++:this.toaster("到底啦！想继续做题请点再来十题哦~",1200),console.log(this.questionIndex),this.clearOptions()},lastQuestion:function(){this.questionIndex>0?this.questionIndex--:this.toaster("到顶啦！",600),this.clearOptions()},clearOptions:function(){this.btnTypes.A="default",this.btnTypes.B="default",this.btnTypes.C="default",this.btnTypes.D="default"},again:function(){this.getQuestions(),this.clearOptions(),this.questionIndex=0}}},z={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"quizbody",staticStyle:{"margin-top":"5px"}},[n("meta",{attrs:{content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0",name:"viewport"}}),t._v(" "),n("div",{attrs:{id:"options"}},[n("van-progress",{attrs:{percentage:t.percentage}}),t._v(" "),n("div",{attrs:{id:"title"}},[n("strong",[t._v(t._s(t.questionIndex+1+"、"+t.questions[t.questionIndex].title))])]),t._v(" "),n("van-button",{staticClass:"options",attrs:{size:"large",type:t.btnTypes.A,text:t.questions[t.questionIndex].A},on:{click:function(e){t.checkAnswer("A")}}}),t._v(" "),n("van-button",{staticClass:"options",attrs:{size:"large",type:t.btnTypes.B,text:t.questions[t.questionIndex].B},on:{click:function(e){t.checkAnswer("B")}}},[t._v(t._s(t.questions[t.questionIndex].B))]),t._v(" "),n("van-button",{staticClass:"options",attrs:{size:"large",type:t.btnTypes.C,text:t.questions[t.questionIndex].C},on:{click:function(e){t.checkAnswer("C")}}},[t._v(t._s(t.questions[t.questionIndex].C))]),t._v(" "),n("van-button",{staticClass:"options",attrs:{size:"large",type:t.btnTypes.D,text:t.questions[t.questionIndex].D},on:{click:function(e){t.checkAnswer("D")}}},[t._v(t._s(t.questions[t.questionIndex].D))])],1),t._v(" "),n("div",{attrs:{id:"btns"}},[n("van-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){t.addfav(t.questions[t.questionIndex].ID)}}},[t._v("收藏")]),t._v(" "),n("br"),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.questionIndex>=9,expression:"questionIndex >= 9"}],attrs:{id:"againBtn"}},[n("van-button",{staticStyle:{width:"96%"},attrs:{type:"primary",plain:""},on:{click:t.again}},[t._v("再来十题")]),t._v(" "),n("br")],1),t._v(" "),n("van-button",{staticStyle:{width:"47%"},attrs:{type:"primary",nowrap:""},on:{click:t.lastQuestion}},[t._v("上一题")]),t._v(" "),n("van-button",{staticStyle:{width:"47%"},attrs:{type:"primary",nowrap:""},on:{click:t.nextQuestion}},[t._v("下一题")]),t._v(" "),n("van-button",{staticStyle:{width:"96%"},attrs:{type:"primary"},on:{click:t.showAnswer}},[t._v("显示答案")]),t._v(" "),t._m(0)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{attrs:{href:"http://132.232.7.38/old/",type:"primary"}},[e("h3",[this._v("新版用的不爽？点我使用老版")])])}]};var E={name:"home",components:{quizbody:n("VU/8")(Q,z,!1,function(t){n("0t1p")},"data-v-243c6bff",null).exports},created:function(){this.$emit("updataTitle",0)}},U={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"home"}},[e("quizbody")],1)},staticRenderFns:[]},B=n("VU/8")(E,U,!1,null,null,null).exports,D={name:"user",props:["totalRecords"],data:function(){return{username:localStorage.getItem("username")}},created:function(){this.$emit("updataTitle",2)},methods:{logout:function(){localStorage.clear(),location.reload()}}},F={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"user"}},[n("van-cell-group",[n("van-field",{attrs:{value:t.username,label:"用户名","left-icon":"contact",disabled:""}}),t._v(" "),n("van-cell",{attrs:{value:"查看",icon:"shop",to:"/marked","is-link":""}},[n("template",{slot:"title"},[n("span",{staticClass:"van-cell-text"},[t._v("我的收藏")]),t._v(" "),n("van-tag",{attrs:{type:"danger"}},[t._v(" "+t._s(t.totalRecords))])],1)],2),t._v(" "),n("van-button",{staticStyle:{width:"95%"},attrs:{size:"large",type:"default"},on:{click:t.logout}},[t._v("注销登录")])],1),t._v(" "),n("van-button",{staticStyle:{bottom:"0",width:"95%"},attrs:{size:"large",type:"default"},on:{click:t.logout}},[t._v("@alva")])],1)},staticRenderFns:[]},M=n("VU/8")(D,F,!1,null,null,null).exports,V={name:"search",data:function(){return{keyword:null,questions:[]}},created:function(){this.$emit("updataTitle",1)},methods:{onSearch:function(){if(this.keyword){var t=this.$toast.loading({mask:!0,message:"加载中..."}),e=this.keyword,n=this;this.axios.get("http://132.232.7.38/qsearch.php",{params:{keyword:e}}).then(function(e){for(var a=e.data.questions,s=e.data.totalRecords,o=0;o<a.length;o++)console.log(a[o]),a[o].title=a[o].title.replace(n.keyword,'<span style="color:red;font-style:oblisque;font-weight:bold;">'+n.keyword+"</span>");n.questions=a;var i=n.questions.length;t.clear(),i>0?s>50?n.$toast("匹配到"+s+"题，考虑到性能，只显示前50个结果~"):n.$toast.success("匹配到"+s+"题~"):n.$toast.fail("没搜到哦，关键词两位最佳~")})}else this.$toast.fail("请输入搜索关键词~")}}},O={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"search"}},[n("van-search",{attrs:{placeholder:"关键词两位最佳~","show-action":""},on:{search:t.onSearch},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[n("div",{attrs:{slot:"action"},on:{click:t.onSearch},slot:"action"},[t._v("搜索")])]),t._v(" "),n("div",{staticStyle:{transition:"height 5"},attrs:{id:"qs"}},[t.questions.length>0?n("table",{attrs:{name:"fade"}},t._l(t.questions,function(e,a){return n("tbody",{key:a},[n("tr",[n("td",{staticStyle:{"background-color":"rgba(0, 0, 0, 0.075)"},attrs:{colspan:"2"},domProps:{innerHTML:t._s(a+1+"、"+e.title)}})]),t._v(" "),n("tr",[n("td",[t._v(t._s(e.A))]),t._v(" "),n("td",[t._v(t._s(e.B))])]),t._v(" "),n("tr",[n("td",[t._v(t._s(e.C))]),t._v(" "),n("td",[t._v(t._s(e.D))])]),t._v(" "),n("tr",[n("td",[t._v("答案["),n("strong",{staticStyle:{color:"green"}},[t._v(t._s(e.answer))]),t._v("]")]),t._v(" "),n("td",[t._v("难度:"),n("span",{staticStyle:{color:"green","font-weight":"bold"}},[t._v(t._s(e.hard))])])])])})):n("van-notice-bar",{attrs:{text:"还没有搜到任何题目哦~"}})],1)],1)},staticRenderFns:[]};var W=n("VU/8")(V,O,!1,function(t){n("aLlq")},null,null).exports,X={name:"marked",data:function(){return{showPop:!1,PageList:[],questions:[],username:localStorage.getItem("username"),currentPage:1,pageCount:0,isLoading:!1,token:localStorage.getItem("token")}},computed:{currentQuestions:function(){this.updataQuestions(this.username,this.currentPage)}},created:function(){if(this.username){this.$emit("updataTitle",2)}},activated:function(){this.updataQuestions(this.username,this.currentPage)},methods:{onSelectPage:function(t,e){this.currentPage=e+1,this.showPop=!1},onRefresh:function(){this.updataQuestions()},rmFav:function(t){var e=this;this.axios.get("http://132.232.7.38/rmfav.php",{params:{username:e.username,id:t,token:e.token}}).then(function(t){e.updataQuestions()})},updataQuestions:function(t,e){var n=this.$toast.loading({mask:!0,message:"加载中..."}),a=this;this.axios.get("http://132.232.7.38/getfav.php",{params:{username:this.username,page:this.currentPage,token:this.token}}).then(function(t){a.pageCount=Math.ceil(t.data[0]/15);for(var e=1;e<=a.pageCount;e++)a.PageList.push(e);a.questions=t.data,a.isLoading=!1,n.clear()})}}},H={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"marked"}},[n("div",{staticStyle:{},attrs:{id:"container"}},[n("meta",{attrs:{name:"viewport",content:"width=device-width,initial-scale=1.0"}}),t._v(" "),n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[n("div",{attrs:{id:"qs"}},[t._v("\n        "+t._s(t.currentQuestions)+"\n        "),"string"!=typeof t.questions?n("table",t._l(t.questions,function(e,a){return 0!=a?n("tbody",{key:a},[n("tr",[n("td",{staticStyle:{"background-color":"rgba(0, 0, 0, 0.075)"},attrs:{colspan:"2"}},[t._v("\n                "+t._s(a+"、"+e.title)+"\n                "),n("van-button",{staticStyle:{float:"right"},attrs:{size:"mini"},on:{click:function(n){t.rmFav(e.ID)}}},[t._v("删除")])],1)]),t._v(" "),n("tr",[n("td",[t._v(t._s(e.A))]),t._v(" "),n("td",[t._v(t._s(e.B))])]),t._v(" "),n("tr",[n("td",[t._v(t._s(e.C))]),t._v(" "),n("td",[t._v(t._s(e.D))])]),t._v(" "),n("tr",[n("td",[t._v("答案["),n("strong",{staticStyle:{color:"green"}},[t._v(t._s(e.answer))]),t._v("]")]),t._v(" "),n("td",{staticStyle:{color:"red"}},[t._v(t._s(e.time))])])]):t._e()})):n("van-notice-bar",{attrs:{text:"还没有搜藏任何题目哦~"}})],1)])],1),t._v(" "),n("div",[n("van-button",{attrs:{type:"primary",size:"large",plain:""},on:{click:function(e){t.showPop=!0}}},[t._v("自定义跳转页")]),t._v(" "),n("van-popup",{attrs:{position:"bottom"},model:{value:t.showPop,callback:function(e){t.showPop=e},expression:"showPop"}},[n("van-picker",{attrs:{"show-toolbar":"",columns:t.PageList},on:{confirm:t.onSelectPage,cancel:function(e){t.showPop=!1}}})],1),t._v(" "),n("van-pagination",{staticStyle:{"margin-bottom":"25%"},attrs:{"page-count":t.pageCount,mode:"simple"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])},staticRenderFns:[]};var G=n("VU/8")(X,H,!1,function(t){n("tVas")},null,null).exports,N={name:"login",data:function(){return{username:localStorage.getItem("username"),password:localStorage.getItem("password"),token:localStorage.getItem("token"),passwordConfirm:null,isLogin:!1}},computed:{pwdConfirm:function(){return this.password!=this.passwordConfirm?"两次输入的密码不一致！":null},pwdErr:function(){var t=this.password;return t?t.length<6?"密码长度必须大于6位！":null:"请输入密码"},usrErr:function(){var t=this.username;if(!t)return"请输入用户名";return t.includes(" ")?(this.username=this.username.replace(" ",""),"用户名不允许出现空格！"):t.length<6?"用户名长度至少6位！":null}},methods:{login:function(){var t=this.username,e=this.password;if(t)if(t){var n=this;this.axios.get("http://132.232.7.38/login.php",{params:{username:this.username,password:this.password}}).then(function(a){var s=a.data.info,o=(a.data.code,a.data.token);"success"==s?(n.saveUserInfo(t,e,o),n.$toast.success("登录成功"),location.reload()):n.$toast.fail("登录失败")})}else this.$toast.fail({message:"请输入密码",duration:600});else this.$toast.fail({message:"请输入用户名",duration:600})},reg:function(){},saveUserInfo:function(t,e,n){localStorage.setItem("username",t),localStorage.setItem("password",e),localStorage.setItem("token",n)},beforeClose:function(t,e){console.log("before");var n=this;if("confirm"===t){this.axios.get("http://132.232.7.38/reg.php",{params:{username:n.username,password:n.password}}).then(function(t){"1"==t.data?n.$toast.success("注册成功，请登录~"):n.$toast.fail("注册失败，用户名可能已存在。")}).catch(function(t){n.$toast.fail("网络错误！")}),e()}else e()}}},Y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"login"}},[n("h4",[t._v("未登录，请登录或注册~")]),t._v(" "),n("van-cell-group",[n("van-field",{attrs:{label:"账号","left-icon":"contact",type:"text",placeholder:"请输入账号","error-message":"",border:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.login(e):null}},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),n("van-field",{attrs:{label:"密码","left-icon":"idcard",type:"password",placeholder:"请输入密码",border:""},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.login(e):null}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),t.isLogin?t._e():n("van-button",{staticStyle:{width:"98%"},attrs:{size:"large",type:"primary"},on:{click:t.login}},[t._v("登录")]),t._v(" "),n("van-dialog",{attrs:{"confirm-button-text":"注册","show-cancel-button":"","before-close":t.beforeClose},model:{value:t.isLogin,callback:function(e){t.isLogin=e},expression:"isLogin"}},[n("van-field",{attrs:{label:"用户名","error-message":t.usrErr,placeholder:"请输入用户名"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),n("van-field",{attrs:{type:"password","error-message":t.pwdErr,label:"密码",placeholder:"请输入密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),n("van-field",{attrs:{type:"password","error-message":t.pwdConfirm,label:"密码",placeholder:"再次确认密码"},model:{value:t.passwordConfirm,callback:function(e){t.passwordConfirm=e},expression:"passwordConfirm"}})],1),t._v(" "),n("div",{staticStyle:{"text-align":"auto"}},[n("a",{staticStyle:{float:"left"},on:{click:function(e){t.isLogin=!t.isLogin}}},[t._v("没有账号？点我注册")]),t._v(" "),n("a",{staticStyle:{float:"right"}},[t._v("忘记密码？")])])],1)],1)},staticRenderFns:[]};var j=n("VU/8")(N,Y,!1,function(t){n("7gX2")},null,null).exports;q.a.use(R.a);var Z=new R.a({routes:[{path:"/",name:"home",component:B},{path:"/user",name:"user",component:localStorage.getItem("username")&&localStorage.getItem("token")?M:j},{path:"/search",name:"search",component:W},{path:"/marked",name:"marked",component:G}]});q.a.use(I.a,x.a),q.a.use(p.a).use(v.a).use(h.a).use(f.a).use(m.a).use(g.a).use(_.a).use(b.a).use(y.a).use(k.a),q.a.use(i.a).use(r.a).use(c.a).use(l.a).use(u.a).use(d.a),q.a.use(a.a).use(s.a).use(o.a),q.a.config.productionTip=!1,new q.a({el:"#app",router:Z,components:{App:L},template:"<App/>"})},OBwy:function(t,e){},S3AG:function(t,e){},aLlq:function(t,e){},dSDO:function(t,e){},f4F5:function(t,e){},"g/xu":function(t,e){},kyYV:function(t,e){},lbtJ:function(t,e){},tVas:function(t,e){},uvvn:function(t,e){},wA3Z:function(t,e){},znX2:function(t,e){}},["NHnr"]);
